const fs = require('fs');
const path = require('path');

const grammar = [
  {
    id: '1',
    title: '은/는 - Тема предложения',
    explanation: `Частица 은/는 используется для выделения темы предложения или для противопоставления.

1. Правило использования:
   - 은 используется после согласных
   - 는 используется после гласных

2. Основные функции:
   - Выделение темы предложения
   - Противопоставление
   - Подчеркивание известной информации

3. Примеры использования:
   - После существительных: 책은 (книга), 사람은 (человек)
   - После местоимений: 저는 (я), 그것은 (это)
   - В противопоставлениях: 비는 오지만 바람은 불지 않아요 (Дождь идёт, но ветер не дует)

4. Важные замечания:
   - Может использоваться с другими частицами
   - Не используется с вопросительными словами
   - В разговорной речи иногда опускается`,
    example: '저는 학생입니다. / 한국은 아름답습니다.',
    exampleTranslation: 'Я (что касается меня) студент. / Корея (что касается Кореи) красивая.',
    level: 'basic'
  },
  {
    id: '2',
    title: '이/가 - Подлежащее',
    explanation: `Частица 이/가 отмечает подлежащее в предложении и используется для указания на новую информацию.

1. Правило использования:
   - 이 используется после согласных
   - 가 используется после гласных

2. Основные функции:
   - Маркировка подлежащего
   - Введение новой информации
   - Усиление значимости субъекта

3. Случаи использования:
   - В повествовательных предложениях
   - В вопросительных предложениях
   - При описании состояния или существования

4. Особенности:
   - Часто используется с глаголами состояния
   - В разговорной речи может опускаться
   - Не используется с уже известной информацией`,
    example: '비가 옵니다. / 누가 왔어요?',
    exampleTranslation: 'Идёт дождь. (Дождь падает) / Кто пришёл?',
    level: 'basic'
  },
  {
    id: '3',
    title: '을/를 - Прямое дополнение',
    explanation: `Частица 을/를 маркирует прямое дополнение в предложении, указывая на объект действия.

1. Правило использования:
   - 을 используется после согласных
   - 를 используется после гласных

2. Основные функции:
   - Обозначение объекта действия
   - Указание на цель действия
   - Выражение длительности или расстояния

3. Типичные случаи использования:
   - С переходными глаголами
   - При указании на объект действия
   - В конструкциях с длительностью времени

4. Важные замечания:
   - Может использоваться с другими частицами
   - В разговорной речи может опускаться
   - Не используется с непереходными глаголами`,
    example: '책을 읽습니다. / 음악을 들어요.',
    exampleTranslation: 'Читаю книгу. / Слушаю музыку.',
    level: 'basic'
  },
  {
    id: '4',
    title: '~습니다/입니다 - Вежливая форма',
    explanation: `Формальное окончание предложения, используемое в официальных ситуациях.

1. Правила использования:
   - 습니다 используется с глаголами и прилагательными
   - 입니다 используется с существительными
   - Отрицательная форма: ~지 않습니다

2. Уровни вежливости:
   - Самый формальный уровень
   - Используется в официальных ситуациях
   - Подходит для публичных выступлений

3. Контексты использования:
   - Деловые встречи
   - Публичные выступления
   - Официальные документы
   - Новости и репортажи

4. Важные аспекты:
   - Всегда используется с honorific prefix 시
   - Не используется в неформальной речи
   - Имеет чёткую интонацию`,
    example: '공부합니다. / 선생님입니다.',
    exampleTranslation: 'Учусь. / Я учитель.',
    level: 'basic'
  },
  {
    id: '5',
    title: '~아요/어요 - Неформальная вежливая форма',
    explanation: `Повседневная вежливая форма, используемая в большинстве ситуаций.

1. Правила образования:
   - После гласных 아, 오 → 아요
   - После остальных гласных → 어요
   - После 하다 → 해요
   - Отрицание: ~지 않아요/안 ~아요/어요

2. Контексты использования:
   - Повседневное общение
   - Разговор с людьми одного возраста
   - Неформальные ситуации
   - Общение с незнакомыми людьми

3. Особенности:
   - Средний уровень вежливости
   - Универсальность использования
   - Подходит для большинства ситуаций

4. Важные замечания:
   - Может использоваться с вопросительной интонацией
   - Сочетается с различными грамматическими конструкциями
   - Имеет нейтральное эмоциональное окрашивание`,
    example: '좋아요. / 먹어요.',
    exampleTranslation: 'Хорошо. / Кушаю.',
    level: 'basic'
  },
  {
    id: '6',
    title: '~고 - Соединение действий',
    explanation: `Грамматическая конструкция для соединения двух или более действий.

1. Основные функции:
   - Последовательность действий
   - Одновременные действия
   - Перечисление действий или состояний

2. Правила использования:
   - Присоединяется непосредственно к основе глагола
   - Не изменяется по времени
   - Может соединять более двух действий

3. Особые случаи:
   - С глаголом 있다/없다
   - В устойчивых выражениях
   - При описании привычек

4. Важные замечания:
   - Не используется для выражения цели
   - Сохраняет временную форму только в последнем глаголе
   - Может указывать на причинно-следственную связь`,
    example: '아침을 먹고 학교에 갑니다.',
    exampleTranslation: 'Поев завтрак, иду в школу.',
    level: 'basic'
  },
  {
    id: '7',
    title: '~지만 - Противительный союз',
    explanation: `Грамматическая конструкция для выражения противопоставления или уступки.

1. Основные функции:
   - Противопоставление действий или состояний
   - Выражение уступки
   - Указание на неожиданный результат

2. Правила использования:
   - Присоединяется к основе глагола или прилагательного
   - Может использоваться с разными временами
   - Часто используется с противоположными понятиями

3. Типичные контексты:
   - Сравнение ситуаций
   - Выражение контраста
   - Объяснение исключений
   - Смягчение отказа

4. Стилистические особенности:
   - Формальный и неформальный стиль
   - Может использоваться для смягчения высказывания
   - Часто используется в письменной речи`,
    example: '비싸지만 맛있어요.',
    exampleTranslation: 'Дорого, но вкусно.',
    level: 'intermediate'
  },
  {
    id: '8',
    title: '~서 - Причина или последовательность',
    explanation: `Грамматическая конструкция для выражения причины или последовательности действий.

1. Основные функции:
   - Указание на причину
   - Выражение последовательности действий
   - Объяснение мотивации

2. Правила использования:
   - После гласных и согласных
   - Не используется с прилагательными в настоящем времени
   - Может указывать на непосредственную причину

3. Особенности употребления:
   - В повседневной речи
   - В объяснениях
   - При описании процессов
   - В причинно-следственных связях

4. Ограничения:
   - Не используется в повелительном наклонении
   - Не используется с будущим временем
   - Не может выражать предположительную причину`,
    example: '배가 아파서 병원에 갔어요.',
    exampleTranslation: 'Так как болел живот, пошёл в больницу.',
    level: 'intermediate'
  },
  {
    id: '9',
    title: '~(으)ㄹ 수 있다/없다 - Возможность',
    explanation: `Грамматическая конструкция для выражения возможности или невозможности действия.

1. Структура:
   - (으)ㄹ + 수 + 있다/없다
   - 으 добавляется после согласных
   - ㄹ используется после гласных

2. Основные значения:
   - Физическая возможность
   - Разрешение
   - Способность
   - Вероятность

3. Контексты использования:
   - Описание навыков
   - Запрос разрешения
   - Выражение возможности
   - Описание правил

4. Особые случаи:
   - В вопросах
   - В отрицательных предложениях
   - В условных конструкциях
   - С разными временами`,
    example: '한국어를 말할 수 있어요.',
    exampleTranslation: 'Я могу говорить по-корейски.',
    level: 'intermediate'
  },
  {
    id: '10',
    title: '~(으)면 - Условие',
    explanation: `Грамматическая конструкция для выражения условия или предположения.

1. Структура:
   - (으)면 присоединяется к основе глагола
   - 으 добавляется после согласных
   - После гласных используется только 면

2. Типы условий:
   - Реальное условие
   - Гипотетическое условие
   - Повторяющееся условие
   - Общие правила

3. Использование времён:
   - Настоящее время
   - Прошедшее время
   - Будущее время
   - Вневременные утверждения

4. Особые случаи:
   - В советах и рекомендациях
   - В описании привычек
   - В научных утверждениях
   - В пословицах и поговорках`,
    example: '비가 오면 집에 있을 거예요.',
    exampleTranslation: 'Если пойдёт дождь, останусь дома.',
    level: 'intermediate'
  },
  {
    id: '11',
    title: '~아/어서 - Последовательность действий',
    explanation: `Грамматическая конструкция для выражения последовательности действий или причинно-следственной связи.

1. Правила образования:
   - После 아/오 → 아서
   - После других гласных → 어서
   - После 하다 → 해서
   - Неправильные глаголы имеют особые формы

2. Основные функции:
   - Последовательность действий
   - Причина и следствие
   - Способ действия
   - Временная связь

3. Особенности употребления:
   - Не используется с будущим временем
   - Нельзя использовать с повелительным наклонением
   - Действия должны быть логически связаны
   - Второе действие следует сразу за первым

4. Стилистические нюансы:
   - Используется в разговорной речи
   - Подходит для объяснений
   - Часто встречается в инструкциях
   - Имеет нейтральный тон`,
    example: '숙제를 끝내서 영화를 봤어요.',
    exampleTranslation: 'Закончив домашнее задание, посмотрел фильм.',
    level: 'intermediate'
  },
  {
    id: '12',
    title: '~(으)니까 - Причина',
    explanation: `Грамматическая конструкция для выражения причины с эмоциональным оттенком.

1. Структура:
   - (으)니까 присоединяется к основе глагола
   - 으 добавляется после согласных
   - После гласных используется только 니까

2. Особенности значения:
   - Субъективная причина
   - Эмоциональное объяснение
   - Личное мнение или опыт
   - Обоснование совета или приказа

3. Контексты использования:
   - В советах и рекомендациях
   - При объяснении личных решений
   - В эмоциональных высказываниях
   - В повседневной речи

4. Отличия от ~서:
   - Более эмоциональное
   - Может использоваться с повелительным наклонением
   - Подчеркивает личное отношение
   - Часто используется в аргументации`,
    example: '비가 오니까 우산을 가져가세요.',
    exampleTranslation: 'Так как идёт дождь, возьмите зонт.',
    level: 'intermediate'
  },
  {
    id: '13',
    title: '~(으)ㄹ 때 - Когда',
    explanation: `Грамматическая конструкция для указания времени действия.

1. Структура:
   - (으)ㄹ + 때
   - 으 добавляется после согласных
   - ㄹ используется после гласных

2. Временные отношения:
   - Одновременность действий
   - Повторяющиеся действия
   - Привычные действия
   - Общие утверждения

3. Особенности использования:
   - В описании прошлого опыта
   - При планировании будущих действий
   - В общих правилах
   - В повседневных ситуациях

4. Грамматические особенности:
   - Может использоваться с разными временами
   - Сочетается с различными окончаниями
   - Часто используется в придаточных предложениях
   - Может указывать на конкретный момент или период`,
    example: '어렸을 때 피아노를 배웠어요.',
    exampleTranslation: 'Когда был маленьким, учился играть на пианино.',
    level: 'intermediate'
  },
  {
    id: '14',
    title: '~기 때문에 - Причина (формально)',
    explanation: `Формальная грамматическая конструкция для выражения причины.

1. Структура:
   - Глагол/прилагательное + 기 + 때문에
   - Более формальный вариант: 때문입니다
   - В разговорной речи: 때문이에요

2. Использование:
   - В официальных ситуациях
   - В письменной речи
   - В формальных объяснениях
   - В научных текстах

3. Особенности:
   - Объективная причина
   - Логическое объяснение
   - Формальный стиль
   - Четкая причинно-следственная связь

4. Отличия от других причинных конструкций:
   - Более формальное, чем ~서
   - Более объективное, чем ~니까
   - Подходит для официальных документов
   - Используется в академическом контексте`,
    example: '시험이 있기 때문에 공부해야 해요.',
    exampleTranslation: 'Поскольку есть экзамен, нужно учиться.',
    level: 'advanced'
  },
  {
    id: '15',
    title: '~(으)ㄹ 것 같다 - Предположение',
    explanation: `Грамматическая конструкция для выражения предположения или вероятности.

1. Структура:
   - (으)ㄹ + 것 + 같다
   - 으 добавляется после согласных
   - ㄹ используется после гласных

2. Типы предположений:
   - Основанные на наблюдении
   - Интуитивные догадки
   - Вероятные события
   - Субъективные оценки

3. Степени уверенности:
   - Высокая вероятность
   - Средняя уверенность
   - Предчувствие
   - Догадка

4. Контексты использования:
   - В повседневных разговорах
   - При выражении мнения
   - В прогнозах
   - При описании впечатлений`,
    example: '내일은 날씨가 좋을 것 같아요.',
    exampleTranslation: 'Кажется, завтра будет хорошая погода.',
    level: 'advanced'
  },
  {
    id: '16',
    title: '~더니 - Изменение ситуации',
    explanation: `Грамматическая конструкция для выражения изменения ситуации или неожиданного результата.

1. Структура:
   - Глагол/прилагательное + 더니
   - Используется только с прошедшим временем
   - Указывает на контраст между прошлым и настоящим

2. Основные значения:
   - Неожиданное изменение
   - Контраст ситуаций
   - Результат наблюдения
   - Причинно-следственная связь

3. Особенности употребления:
   - Только для личного опыта
   - Требует непосредственного наблюдения
   - Подчеркивает изменение
   - Часто имеет эмоциональный оттенок

4. Ограничения:
   - Нельзя использовать с будущим временем
   - Требует личного опыта или наблюдения
   - Не используется с формальным стилем
   - Не подходит для общих утверждений`,
    example: '아팠더니 이제 괜찮아요.',
    exampleTranslation: 'Болел, а теперь в порядке.',
    level: 'advanced'
  },
  {
    id: '17',
    title: '~(으)ㄹ 뿐만 아니라 - Не только..., но и',
    explanation: `Грамматическая конструкция для добавления информации и расширения значения.

1. Структура:
   - (으)ㄹ + 뿐만 + 아니라
   - 으 добавляется после согласных
   - ㄹ используется после гласных

2. Функции:
   - Добавление информации
   - Расширение значения
   - Усиление высказывания
   - Перечисление качеств

3. Особенности использования:
   - В формальной речи
   - При перечислении характеристик
   - В описаниях
   - В аргументации

4. Стилистические варианты:
   - Формальный стиль: ~ㄹ 뿐만 아니라
   - Разговорный стиль: ~ㄹ 뿐 아니라
   - В письменной речи
   - В устных презентациях`,
    example: '그는 똑똑할 뿐만 아니라 친절해요.',
    exampleTranslation: 'Он не только умный, но и добрый.',
    level: 'advanced'
  },
  {
    id: '18',
    title: '~(으)면서 - Одновременные действия',
    explanation: `Грамматическая конструкция для выражения одновременности действий.

1. Структура:
   - (으)면서 присоединяется к основе глагола
   - 으 добавляется после согласных
   - После гласных используется только 면서

2. Типы одновременных действий:
   - Параллельные действия
   - Продолжительные действия
   - Противоречивые действия
   - Привычные действия

3. Особенности употребления:
   - Действия должны происходить одновременно
   - Часто используется с длительными глаголами
   - Может выражать противоречие
   - Подходит для описания привычек

4. Ограничения:
   - Нельзя использовать с моментальными действиями
   - Требует логической связи между действиями
   - Не используется с прилагательными
   - Не подходит для последовательных действий`,
    example: '음악을 들으면서 공부해요.',
    exampleTranslation: 'Учусь, слушая музыку.',
    level: 'advanced'
  },
  {
    id: '19',
    title: '~자마자 - Сразу после',
    explanation: `Грамматическая конструкция для выражения немедленного следования одного действия за другим.

1. Структура:
   - Глагол + 자마자
   - Не изменяется по временам
   - Указывает на немедленное следование

2. Особенности значения:
   - Мгновенная последовательность
   - Непосредственная связь действий
   - Отсутствие временного промежутка
   - Причинно-следственная связь

3. Контексты использования:
   - В описании быстрых реакций
   - При планировании действий
   - В обещаниях
   - В повседневных ситуациях

4. Грамматические особенности:
   - Не используется с прилагательными
   - Второе действие следует немедленно
   - Часто используется в будущем времени
   - Подчеркивает скорость реакции`,
    example: '집에 도착하자마자 전화할게요.',
    exampleTranslation: 'Позвоню сразу как приду домой.',
    level: 'advanced'
  },
  {
    id: '20',
    title: '~(으)ㄹ 텐데 - Предположение с сожалением',
    explanation: `Грамматическая конструкция для выражения предположения с оттенком сожаления или "что было бы, если".

1. Структура:
   - (으)ㄹ + 텐데
   - 으 добавляется после согласных
   - ㄹ используется после гласных

2. Основные значения:
   - Сожаление о возможном
   - Предположение о лучшем варианте
   - Мягкое предложение
   - Выражение упущенной возможности

3. Эмоциональные оттенки:
   - Сожаление
   - Разочарование
   - Надежда
   - Предположение

4. Использование в диалоге:
   - Для выражения сочувствия
   - При даче советов
   - В размышлениях о прошлом
   - При обсуждении альтернатив`,
    example: '일찍 일어났으면 좋았을 텐데.',
    exampleTranslation: 'Было бы хорошо, если бы я встал рано.',
    level: 'advanced'
  }
];

async function getRandomGrammar() {
  const randomIndex = Math.floor(Math.random() * grammar.length);
  return grammar[randomIndex];
}

async function getAllGrammar() {
  return grammar;
}

async function getGrammarById(id) {
  return grammar.find(item => item.id === id) || null;
}

module.exports = {
  getRandomGrammar,
  getAllGrammar,
  getGrammarById
};